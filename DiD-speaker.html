<!DOCTYPE html>
<html lang="en"><head>
<script src="DiD_files/libs/clipboard/clipboard.min.js"></script>
<script src="DiD_files/libs/quarto-html/tabby.min.js"></script>
<script src="DiD_files/libs/quarto-html/popper.min.js"></script>
<script src="DiD_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="DiD_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="DiD_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="DiD_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.0.38">

  <meta name="author" content="Zahid Asghar">
  <meta name="dcterms.date" content="2022-11-06">
  <title>Lecture on Difference in Differences</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="DiD_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="DiD_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="DiD_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="DiD_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="DiD_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="DiD_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="DiD_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#447099" class="center">
  <h1 class="title">Lecture on Difference in Differences</h1>
  <p class="author">Zahid Asghar</p>
  <p class="date">2022-11-06</p>
</section>

<section id="recap" class="slide level2">
<h2>Recap</h2>
<ul>
<li>Last time we discussed the concept of identifying <em>within</em> variation</li>
<li>If all the back doors have to do with things that are <em>constant within individual</em>, we can close them all by using within variation</li>
<li>Obviously that’s not always (or often) going to be the case</li>
<li>But surely we can’t measure and control for all the time-varying stuff either! What are some approaches we can take</li>
</ul>
</section>
<section id="today" class="slide level2">
<h2>Today</h2>
<ul>
<li>Today we’re going to look at one of the most commonly used methods in causal inference, called Difference-in-Differences</li>
<li>We’ll look at the concept today, the details of implementing DID with regression next time, and an example study after that</li>
</ul>
</section>
<section id="the-idea" class="slide level2">
<h2>The Idea</h2>
<ul>
<li>The basic idea is to take fixed effects <em>and then compare the within variation across groups</em></li>
<li>We have a treated group that we observe <em>both before and after they’re treated</em></li>
<li>And we have an untreated group</li>
<li>The treated and control groups probably aren’t identical - there are back doors! So… we <em>control for group</em> like with fixed effects</li>
</ul>
</section>
<section id="the-basic-problem" class="slide level2">
<h2>The Basic Problem</h2>
<ul>
<li>What kind of setup lends itself to being studied with difference-in-differences?</li>
<li>Crucially, we need to have a group (or groups) that receives a treatment</li>
<li>And, we need to observe them both <em>before</em> and <em>after</em> they get their treatment</li>
<li>Observing each individual (or group) multiple times, kind of like we did with fixed effects</li>
</ul>
</section>
<section id="the-basic-problem-1" class="slide level2">
<h2>The Basic Problem</h2>
<ul>
<li>So one obvious thing we might do would be to just use fixed effects</li>
<li>Using variation <em>within</em> group, comparing the time before the policy to the time after</li>
<li>But!</li>
</ul>
</section>
<section id="the-basic-problem-2" class="slide level2">
<h2>The Basic Problem</h2>
<ul>
<li>Unlike with fixed effects, the relationship between time and treatment is very clear: early = no treatment. Late = treatment</li>
<li>So if anything else is changing over time, we have a back door!</li>
</ul>

<img data-src="DiD_files/figure-revealjs/unnamed-chunk-2-1.png" width="576" class="r-stretch"></section>
<section id="the-basic-problem-3" class="slide level2">
<h2>The Basic Problem</h2>
<ul>
<li>Ok, time is a back door, no problem. We can observe and measure time. So we’ll just control for it and close the back door!</li>
<li>But we can’t!</li>
<li>Why not?</li>
<li>Because in this group, you’re either before treatment and <code>D = 0</code>, or after treatment and <code>D = 1</code>. If we control for time, we’re effectively controlling for treatment</li>
<li>“What’s the effect of treatment, controlling for treatment” doesn’t make any sense</li>
</ul>
</section>
<section>
<section id="difference-in-difference-models-i" class="title-slide slide level1 center">
<h1>Difference-in-Difference Models I</h1>
<div class="columns">
<div class="colum" width="&quot;50%">
<ul>
<li><p>Often, we want to examine the consequences of a change, such as a law or policy</p></li>
<li><p>.green[<strong>Example</strong>]: how do States that implement law <span class="math inline">\(X\)</span> see changes in <span class="math inline">\(Y\)</span></p>
<ul>
<li><strong>Treatment</strong>: States that implement <span class="math inline">\(X\)</span></li>
<li><strong>Control</strong>: States that did not implement <span class="math inline">\(X\)</span></li>
</ul></li>
<li><p>If we have <strong>panel data</strong> with observations for all states before <em>and</em> after the change…</p></li>
<li><p>Find the <em>difference</em> between treatment &amp; control groups <em>in</em> their <em>differences</em> before and after the treatment period</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="DiD_files/figure-revealjs/unnamed-chunk-3-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="section" class="slide level2">
<h2></h2>
<div class="cell">

</div>
<div class="cell">
<pre><code>## # A tibble: 4 × 3
##   price cheese chili
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1  2         0     0
## 2  2.35      1     0
## 3  2.35      0     1
## 4  2.7       1     1</code></pre>
</div>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">lm</span>(price <span class="sc">~</span> cheese <span class="sc">+</span> chili <span class="sc">+</span> cheese<span class="sc">*</span>chili,</span>
<span id="cb2-3"><a href="#cb2-3"></a>   <span class="at">data =</span> hotdogs) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>## # A tibble: 4 × 2
##   term         estimate
##   &lt;chr&gt;           &lt;dbl&gt;
## 1 (Intercept)      2   
## 2 cheese           0.35
## 3 chili            0.35
## 4 cheese:chili     0</code></pre>
</div>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<p>Is there a discount when you get cheese <em>and</em> chili?</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>No Cheese</th>
<th>Cheese</th>
<th><strong>Cheese Diff</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>No Chili</td>
<td>$2.00</td>
<td>$2.35</td>
<td>$0.35</td>
</tr>
<tr class="even">
<td>Chili</td>
<td>$2.35</td>
<td>$2.70</td>
<td>$0.35</td>
</tr>
<tr class="odd">
<td><strong>Chili Diff</strong></td>
<td>$0.35</td>
<td>$0.35</td>
<td>$0.00 (<strong>Diff-in-diff</strong>)</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">lm</span>(price <span class="sc">~</span> cheese <span class="sc">+</span> chili <span class="sc">+</span> cheese<span class="sc">*</span>chili,</span>
<span id="cb4-2"><a href="#cb4-2"></a>   <span class="at">data =</span> hotdogs) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>## # A tibble: 4 × 2
##   term         estimate
##   &lt;chr&gt;           &lt;dbl&gt;
## 1 (Intercept)      2   
## 2 cheese           0.35
## 3 chili            0.35
## 4 cheese:chili     0</code></pre>
</div>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<p>Diff-n-diff is just a model with an interaction term between two dummies!</p>
<div class="cell">

</div>
</section>
<section id="visualizing-diff-in-diff" class="slide level2">
<h2>Visualizing Diff-in-Diff</h2>
<p><span class="smallest"><span class="math display">\[\hat{Y_{it}}=\beta_0+\beta_1 \text{Treated}_i +\beta_2 \text{After}_{t}+\beta_3 (\text{Treated}_i \times \text{After}_{t})+u_{it}\]</span></span><br>
</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="DiD_files/figure-revealjs/unnamed-chunk-11-1.png" width="960"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>.smallest[ - .red[Control group <code>\\((Treated = 0)\\)</code>]</p>
<ul>
<li><p>.red[<code>\\(\hat{\beta_0}\\)</code>]: value of <span class="math inline">\(Y\)</span> for <strong>control</strong> group <strong>before</strong> treatment</p></li>
<li><p>.red[<code>\\(\hat{\beta_2}\\)</code>]: time <em>difference</em> (for <strong>control</strong> group)</p></li>
</ul>
</div>
</div>
</section>
<section id="the-basic-problem-4" class="slide level2">
<h2>The Basic Problem</h2>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">#Create our data</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>diddata <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">year =</span> <span class="fu">sample</span>(<span class="dv">2002</span><span class="sc">:</span><span class="dv">2010</span>,<span class="dv">10000</span>,<span class="at">replace=</span>T)) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">mutate</span>(<span class="at">D =</span> year <span class="sc">&gt;=</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Y =</span> <span class="dv">2</span><span class="sc">*</span>D <span class="sc">+</span> .<span class="dv">5</span><span class="sc">*</span>year <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">10000</span>))</span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#Now, control for year</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>diddata <span class="ot">&lt;-</span> diddata <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">D.r =</span> D <span class="sc">-</span> <span class="fu">mean</span>(D), <span class="at">Y.r =</span> Y <span class="sc">-</span> <span class="fu">mean</span>(Y))</span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#What's the difference with and without treatment?</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>diddata <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(D) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Y=</span><span class="fu">mean</span>(Y))</span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="do">## # A tibble: 2 × 2</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="do">##   D         Y</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="do">##   &lt;lgl&gt; &lt;dbl&gt;</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="do">## 1 FALSE 1002.</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="do">## 2 TRUE  1006.</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#And controlling for time?</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>diddata <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(D.r) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Y=</span><span class="fu">mean</span>(Y.r))</span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="do">## # A tibble: 1 × 2</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="do">##     D.r         Y</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="do">##   &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="do">## 1     0 -1.44e-14</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-difference-in-differences-solution" class="slide level2">
<h2>The Difference-in-differences Solution</h2>
<ul>
<li>We can add a <em>control group</em> that did <em>not</em> get the treatment</li>
<li>Then, any changes that are the result of <em>time</em> should show up for that control group, and we can get rid of them!</li>
<li>The change for the treated group from before to after is because of both treatment and time. If we measure the time effect using our control, and subtract that out, we’re left with just the effect of treatment!</li>
</ul>
</section>
<section id="once-again" class="slide level2">
<h2>Once Again</h2>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">#Create our data</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>diddata <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">year =</span> <span class="fu">sample</span>(<span class="dv">2002</span><span class="sc">:</span><span class="dv">2010</span>,<span class="dv">10000</span>,<span class="at">replace=</span>T),</span>
<span id="cb7-3"><a href="#cb7-3"></a>                  <span class="at">group =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">'TreatedGroup'</span>,<span class="st">'UntreatedGroup'</span>),<span class="dv">10000</span>,<span class="at">replace=</span>T)) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">mutate</span>(<span class="at">after =</span> (year <span class="sc">&gt;=</span> <span class="dv">2007</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="co">#Only let the treatment be applied to the treated group</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="fu">mutate</span>(<span class="at">D =</span> after<span class="sc">*</span>(group<span class="sc">==</span><span class="st">'TreatedGroup'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="fu">mutate</span>(<span class="at">Y =</span> <span class="dv">2</span><span class="sc">*</span>D <span class="sc">+</span> .<span class="dv">5</span><span class="sc">*</span>year <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">10000</span>))</span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">#Now, get before-after differences for both groups</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>means <span class="ot">&lt;-</span> diddata <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(group,after) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Y=</span><span class="fu">mean</span>(Y))</span>
<span id="cb7-10"><a href="#cb7-10"></a></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#Before-after difference for untreated, has time effect only</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>bef.aft.untreated <span class="ot">&lt;-</span>(means <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">'UntreatedGroup'</span>,after<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Y)) <span class="sc">-</span> (means <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">'UntreatedGroup'</span>,after<span class="sc">==</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Y))</span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#Before-after for treated, has time and treatment effect</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>bef.aft.treated <span class="ot">&lt;-</span> (means <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">'TreatedGroup'</span>,after<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Y)) <span class="sc">-</span>  (means <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">'TreatedGroup'</span>,after<span class="sc">==</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Y))</span>
<span id="cb7-15"><a href="#cb7-15"></a></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co">#Difference-in-Difference! Take the Time + Treatment effect, and remove the Time effect</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>DID <span class="ot">&lt;-</span> bef.aft.treated <span class="sc">-</span> bef.aft.untreated</span>
<span id="cb7-18"><a href="#cb7-18"></a>DID</span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="do">## [1] 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-difference-in-differences-solution-1" class="slide level2">
<h2>The Difference-in-Differences Solution</h2>
<ul>
<li>This is our way of controlling for time</li>
<li>Of course, we’re NOT accounting for the fact that our treatment and control groups may be different from each other</li>
</ul>

<img data-src="DiD_files/figure-revealjs/unnamed-chunk-16-1.png" width="576" class="r-stretch"></section>
<section id="the-difference-in-differences-solution-2" class="slide level2">
<h2>The Difference-in-Differences Solution</h2>
<ul>
<li>Except that we are! We’re comparing each group to itself over time (controlling for group, like fixed effects), and then comparing <em>those differences</em> between groups (controlling for time). The Difference in the Differences!</li>
<li>Let’s imagine there is an important difference between groups. We’ll still get the same answer</li>
</ul>
</section>
<section id="once-again-1" class="slide level2">
<h2>Once Again</h2>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">#Create our data</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>diddata <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">year =</span> <span class="fu">sample</span>(<span class="dv">2002</span><span class="sc">:</span><span class="dv">2010</span>,<span class="dv">10000</span>,<span class="at">replace=</span>T),</span>
<span id="cb8-3"><a href="#cb8-3"></a>                  <span class="at">group =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">'TreatedGroup'</span>,<span class="st">'UntreatedGroup'</span>),<span class="dv">10000</span>,<span class="at">replace=</span>T)) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">mutate</span>(<span class="at">after =</span> (year <span class="sc">&gt;=</span> <span class="dv">2007</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="co">#Only let the treatment be applied to the treated group</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="fu">mutate</span>(<span class="at">D =</span> after<span class="sc">*</span>(group<span class="sc">==</span><span class="st">'TreatedGroup'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="fu">mutate</span>(<span class="at">Y =</span> <span class="dv">2</span><span class="sc">*</span>D <span class="sc">+</span> .<span class="dv">5</span><span class="sc">*</span>year <span class="sc">+</span> (group <span class="sc">==</span> <span class="st">'TreatedGroup'</span>) <span class="sc">+</span>  <span class="fu">rnorm</span>(<span class="dv">10000</span>))</span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#Now, get before-after differences for both groups</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>means <span class="ot">&lt;-</span> diddata <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(group,after) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Y=</span><span class="fu">mean</span>(Y))</span>
<span id="cb8-10"><a href="#cb8-10"></a></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#Before-after difference for untreated, has time effect only</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>bef.aft.untreated <span class="ot">&lt;-</span>(means <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">'UntreatedGroup'</span>,after<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Y)) <span class="sc">-</span> (means <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">'UntreatedGroup'</span>,after<span class="sc">==</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Y))</span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#Before-after for treated, has time and treatment effect</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>bef.aft.treated <span class="ot">&lt;-</span> (means <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">'TreatedGroup'</span>,after<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Y)) <span class="sc">-</span>  (means <span class="sc">%&gt;%</span>  <span class="fu">filter</span>(group<span class="sc">==</span><span class="st">'TreatedGroup'</span>,after<span class="sc">==</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Y))</span>
<span id="cb8-15"><a href="#cb8-15"></a></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">#Difference-in-Difference! Take the Time + Treatment effect, and remove the Time effect</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>DID <span class="ot">&lt;-</span> bef.aft.treated <span class="sc">-</span> bef.aft.untreated</span>
<span id="cb8-18"><a href="#cb8-18"></a>DID</span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="do">## [1] 2.06</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-difference-in-differences-solution-3" class="slide level2">
<h2>The Difference-in-Differences Solution</h2>
<ul>
<li>We can think about what’s in there and what we’re taking out</li>
<li>Untreated Before Treatment: Untreated Group Mean</li>
<li>Untreated After Treatment: Untreated Group Mean + Time</li>
<li>Treated Before Treatment: Treated Group Mean</li>
<li>Treated After Treatment: Treated Group Mean + Time + Treatment</li>
</ul>
</section>
<section id="the-difference-in-differences-solution-4" class="slide level2">
<h2>The Difference-in-Differences Solution</h2>
<ul>
<li>Before-After Difference for Untreated:</li>
<li>(Untreated Group + Time) - (Untreated Group) = Time</li>
<li>Before-After Difference for Treated:</li>
<li>(Treated Group + Time + Treatment) - (Treated Group) = Time + Treatment</li>
<li>Difference-in-Differences:</li>
<li>Before-After Diff for Treated - B-A Diff for Untreated = (Time + Treatment) - (Time) = Treatment</li>
</ul>
</section>
<section id="the-difference-in-differences-solution-5" class="slide level2">
<h2>The Difference-in-Differences Solution</h2>
<ul>
<li>We are in this way taking out what’s explained by group and by time, controlling for both</li>
</ul>
</section>
<section id="graphically" class="slide level2">
<h2>Graphically</h2>

<img data-src="DiD_files/figure-revealjs/unnamed-chunk-19-1.gif" class="r-stretch"></section>
<section id="example" class="slide level2">
<h2>Example</h2>
<ul>
<li>The classic difference-in-differences example is the Mariel Boatlift</li>
<li>There’s a lot of discussion these days on the impacts of immigration</li>
<li>Immigrants might provide additional labor market competition to people who already live here, driving down wages</li>
<li>Does this actually happen?</li>
</ul>
</section>
<section id="mariel-boatlift" class="slide level2">
<h2>Mariel Boatlift</h2>
<ul>
<li>In 1980, Cuba very briefly lifted emigration restrictions</li>
<li>LOTS of people left the country very quickly, many of them going to Miami</li>
<li>The Miami labor force increased by 7% in a year</li>
<li>If immigrants were ever going to cause a problem for workers already there, seems like it would be happening here</li>
</ul>
</section>
<section id="mariel-boatlift-1" class="slide level2">
<h2>Mariel Boatlift</h2>
<ul>
<li>David Card studied this using Difference-in-Differences, noticing that this influx of immigrants mainly affected Miami, and so other cities in the country could act as a control group</li>
<li>He used Atlanta, Houston, Los Angeles, and Tampa-St.&nbsp;Petersburg as comparisons</li>
<li>How did wages and unemployment of everyone other than Cubans change in Miami from 1979-80 to 81-85, and how did it change in the control cities?</li>
</ul>
</section>
<section id="mariel-boatlift-2" class="slide level2">
<h2>Mariel Boatlift</h2>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">load</span>(<span class="st">'mariel.RData'</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">#Take the log of wage and create our "after treatment" and "treated group" variables</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>df <span class="ot">&lt;-</span> <span class="fu">mutate</span>(df,<span class="at">lwage =</span> <span class="fu">log</span>(hourwage),</span>
<span id="cb9-4"><a href="#cb9-4"></a>             <span class="at">after =</span> year <span class="sc">&gt;=</span> <span class="dv">81</span>,</span>
<span id="cb9-5"><a href="#cb9-5"></a>             <span class="at">miami =</span> smsarank <span class="sc">==</span> <span class="dv">26</span>)</span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">#Then we can do our difference in difference!</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>means <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(after,miami) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">lwage =</span> <span class="fu">mean</span>(lwage),<span class="at">unemp=</span><span class="fu">mean</span>(unemp))</span>
<span id="cb9-9"><a href="#cb9-9"></a>means</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>## # A tibble: 4 × 4
## # Groups:   after [2]
##   after miami lwage  unemp
##   &lt;lgl&gt; &lt;lgl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 FALSE FALSE  1.88 0.0619
## 2 FALSE TRUE   1.74 0.0547
## 3 TRUE  FALSE  1.84 0.0794
## 4 TRUE  TRUE   1.72 0.0854</code></pre>
</div>
</section>
<section id="mariel-boatlift-3" class="slide level2">
<h2>Mariel Boatlift</h2>
<ul>
<li>Did the wages of non-Cubans in Miami drop with the influx?</li>
<li><code>means$lwage[4] - means$lwage[2]</code> = -0.019. Uh oh!</li>
<li>But how about in the control cities?</li>
<li><code>means$lwage[3] - means$lwage[1]</code> = -0.046</li>
<li>Things were getting worse everywhere! How about the overall difference-in-difference?</li>
<li>0.027! Wages actually got BETTER for others with the influx of immigrants</li>
</ul>
</section>
<section id="mariel-boatlift-4" class="slide level2">
<h2>Mariel Boatlift</h2>
<ul>
<li>We can do the same thing for unemployment!</li>
<li>Difference in Miami: <code>means$unemp[4] - means$unemp[2]</code> = 0.031</li>
<li>Difference in control cities: <code>means$unemp[3] - means$unemp[1]</code> = 0.018</li>
<li>Difference-in-differences: 0.013.</li>
<li>So unemployment did rise more in Miami</li>
<li>Similar results if we look only at those without a HS degree, who many Cubanos would be competing with directly (wage DID 0.031, unemployment 0.019)</li>
</ul>
</section>
<section id="difference-in-differences" class="slide level2">
<h2>Difference-in-Differences</h2>
<ul>
<li>It’s important in cases like this (and in all cases!) to think hard about whether we believe our causal diagram, and what that entails</li>
<li>Which, remember, is this:</li>
</ul>

<img data-src="DiD_files/figure-revealjs/unnamed-chunk-23-1.png" width="576" class="r-stretch"></section>
<section id="hidden-assumptions" class="slide level2">
<h2>Hidden Assumptions</h2>
<ul>
<li>One thing we’re assuming is that Time affected the Treatment and Control groups equally, i.e.&nbsp;<em>the time effect is shared and identical between treatment and control groups</em></li>
<li>This is called the “parallel trends” assumption</li>
<li>i.e.&nbsp;<em>if the treatment had not occurred, the gap between treatment and control would have stayed the same after treatment as it was before treatment</em></li>
</ul>
</section>
<section id="hidden-assumptions-1" class="slide level2">
<h2>Hidden Assumptions</h2>
<ul>
<li>If parallel trends fails, our attempt to control for Time by using how it changed in Control won’t work!</li>
<li>Is something missing from our diagram related to how either Control or Treatment might have changed from Before to After?</li>
<li>For example, if Miami wages were already growing faster than Control wages before 1980, this wouldn’t <em>disprove</em> the DID estimate, but it would make that parallel trends assumption pretty unbelievable!</li>
<li>We will talk more about this next time</li>
</ul>
</section>
<section id="hidden-assumptions-2" class="slide level2">
<h2>Hidden Assumptions</h2>
<ul>
<li>Also, how did we get that list of control cities?</li>
<li>Our intuition for using a Control Group is that they should be basically exactly the same except they didn’t get the treatment</li>
<li>Are LA, Houston, Atlanta, and Tampa basically the same as Miami?</li>
</ul>
</section>
<section id="hidden-assumptions-3" class="slide level2">
<h2>Hidden Assumptions</h2>
<ul>
<li>In the case of the Mariel Boatlift, a later paper by Peri &amp; Yasinov checks both of these things and gets similar results</li>
<li>It uses Synthetic Control - a form of matching - to pick Control cities that were trending similarly before 1980</li>
</ul>

<img data-src="Mariel_Synthetic.png" class="r-stretch quarto-figure-center"><p class="caption">Synthetic Mariel</p></section>
<section id="practice" class="slide level2">
<h2>Practice</h2>
<!-- Example and data from Kevin Goulding, study from Eissa & Liebman "Labor Supply Responses to the Earned Income Tax Credit" -->
<ul>
<li>The Earned Income Tax Credit was increased in 1993. This may increase chances single mothers (treated) return to work, but likely not affect single non-moms (control)</li>
<li><code>read_csv('http://nickchk.com/eitc.csv')</code></li>
<li>Create variables <code>after</code> for years 1994+, and <code>treated</code> if they have any <code>children</code></li>
<li>Get average <code>work</code> within <code>year</code> and <code>treated</code>. <code>ggplot()</code> average <code>work</code> (<code>y</code>) separately against <code>year</code> (<code>x</code>) for treated and untreated (<code>color</code>), then <code>geom_vline(aes(xintercept= 1994))</code> to add a vertical line at treatment. Any concerns they’re already trending together/apart in 1991-1993?</li>
<li>Calculate the DID estimate of the effect of the EITC expansion on <code>work</code></li>
</ul>
</section>
<section id="practice-answers" class="slide level2">
<h2>Practice Answers</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'http://nickchk.com/eitc.csv'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mutate</span>(<span class="at">after =</span> year <span class="sc">&gt;=</span> <span class="dv">1994</span>,</span>
<span id="cb11-3"><a href="#cb11-3"></a>         <span class="at">treated =</span> children <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb11-4"><a href="#cb11-4"></a></span>
<span id="cb11-5"><a href="#cb11-5"></a>plotdata <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(treated,year) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="fu">summarize</span>(<span class="at">work =</span> <span class="fu">mean</span>(work))</span>
<span id="cb11-7"><a href="#cb11-7"></a></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="fu">ggplot</span>(plotdata, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> work, <span class="at">color =</span> treated)) <span class="sc">+</span> </span>
<span id="cb11-9"><a href="#cb11-9"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb11-10"><a href="#cb11-10"></a>  <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="dv">1994</span>))</span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="co"># They don't appear to be trending away or towards each other before 1994. Good!</span></span>
<span id="cb11-12"><a href="#cb11-12"></a></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="co">#Now DID:</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>did <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(treated,after) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">work =</span> <span class="fu">mean</span>(work))</span>
<span id="cb11-15"><a href="#cb11-15"></a>untreat.diff <span class="ot">&lt;-</span> did<span class="sc">$</span>work[<span class="dv">2</span>]<span class="sc">-</span>did<span class="sc">$</span>work[<span class="dv">1</span>]</span>
<span id="cb11-16"><a href="#cb11-16"></a>treat.diff <span class="ot">&lt;-</span> did<span class="sc">$</span>work[<span class="dv">4</span>]<span class="sc">-</span>did<span class="sc">$</span>work[<span class="dv">3</span>]</span>
<span id="cb11-17"><a href="#cb11-17"></a>did.estimate <span class="ot">&lt;-</span> treat.diff <span class="sc">-</span> untreat.diff</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<pre><code>## [1] 0.0469</code></pre>
</div>

<img src="https://www.rstudio.com/wp-content/uploads/2018/10/RStudio-Logo-Flat.png" class="slide-logo r-stretch"><div class="footer footer-default">
<p><a href="https://zahidasghar.com/">Zahid Asghar</a></p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="DiD_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="DiD_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="DiD_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="DiD_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="DiD_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="DiD_files/libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="DiD_files/libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="DiD_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="DiD_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="DiD_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="DiD_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="DiD_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'multiplex': {"secret":"16672291292542664044","id":"f8788893d68df54d","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        function fireSlideChanged(previousSlide, currentSlide) {

          // dispatch for htmlwidgets
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for reveal
        if (window.Reveal) {
          window.Reveal.addEventListener("slidechanged", function(event) {
            fireSlideChanged(event.previousSlide, event.currentSlide);
          });
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          let href = ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

</body></html>